<!doctype html>
<html class="default no-js">
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>prct08-filesystem-notes-app-carlsjdh</title>
	<meta name="description" content="Documentation for prct08-filesystem-notes-app-carlsjdh">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" href="assets/css/main.css">
	<script async src="assets/js/search.js" id="search-script"></script>
</head>
<body>
<header>
	<div class="tsd-page-toolbar">
		<div class="container">
			<div class="table-wrap">
				<div class="table-cell" id="tsd-search" data-index="assets/js/search.json" data-base=".">
					<div class="field">
						<label for="tsd-search-field" class="tsd-widget search no-caption">Search</label>
						<input id="tsd-search-field" type="text" />
					</div>
					<ul class="results">
						<li class="state loading">Preparing search index...</li>
						<li class="state failure">The search index is not available</li>
					</ul>
					<a href="index.html" class="title">prct08-filesystem-notes-app-carlsjdh</a>
				</div>
				<div class="table-cell" id="tsd-widgets">
					<div id="tsd-filter">
						<a href="#" class="tsd-widget options no-caption" data-toggle="options">Options</a>
						<div class="tsd-filter-group">
							<div class="tsd-select" id="tsd-filter-visibility">
								<span class="tsd-select-label">All</span>
								<ul class="tsd-select-list">
									<li data-value="public">Public</li>
									<li data-value="protected">Public/Protected</li>
									<li data-value="private" class="selected">All</li>
								</ul>
							</div>
							<input type="checkbox" id="tsd-filter-inherited" checked />
							<label class="tsd-widget" for="tsd-filter-inherited">Inherited</label>
							<input type="checkbox" id="tsd-filter-externals" checked />
							<label class="tsd-widget" for="tsd-filter-externals">Externals</label>
						</div>
					</div>
					<a href="#" class="tsd-widget menu no-caption" data-toggle="menu">Menu</a>
				</div>
			</div>
		</div>
	</div>
	<div class="tsd-page-title">
		<div class="container">
			<h1>prct08-filesystem-notes-app-carlsjdh</h1>
		</div>
	</div>
</header>
<div class="container container-main">
	<div class="row">
		<div class="col-8 col-content">
			<div class="tsd-panel tsd-typography">
				<p>Coverage:  <a href="https://coveralls.io/github/ULL-ESIT-INF-DSI-2021/ull-esit-inf-dsi-20-21-prct08-filesystem-notes-app-carlsjdh"><img src="https://coveralls.io/repos/github/ULL-ESIT-INF-DSI-2021/ull-esit-inf-dsi-20-21-prct08-filesystem-notes-app-carlsjdh/badge.svg" alt="Coverage Status"></a><br>Tests: <a href="https://github.com/ULL-ESIT-INF-DSI-2021/ull-esit-inf-dsi-20-21-prct08-filesystem-notes-app-carlsjdh/actions/workflows/tests.yml"><img src="https://github.com/ULL-ESIT-INF-DSI-2021/ull-esit-inf-dsi-20-21-prct08-filesystem-notes-app-carlsjdh/actions/workflows/tests.yml/badge.svg" alt="Tests"></a><br>QG:  <a href="https://sonarcloud.io/dashboard?id=ULL-ESIT-INF-DSI-2021_ull-esit-inf-dsi-20-21-prct08-filesystem-notes-app-carlsjdh"><img src="https://sonarcloud.io/api/project_badges/measure?project=ULL-ESIT-INF-DSI-2021_ull-esit-inf-dsi-20-21-prct08-filesystem-notes-app-carlsjdh&metric=alert_status" alt="Quality Gate Status"></a></p>
				<p><a href="https://github.com/ULL-ESIT-INF-DSI-2021/ull-esit-inf-dsi-20-21-prct08-filesystem-notes-app-carlsjdh">Volver a Github</a></p>
				<h1> Práctica 8 - Aplicación de procesamiento de notas de texto  </h1>
				<h2> Indice: </h2>
				<ul>
					<li><a href="#introducci%C3%B3n">Introducción:</a></li>
					<li><a href="#objetivos">Objetivos:</a></li>
					<li><a href="#clase-notes">Clase Notes:</a><ul>
							<li><a href="#addnotes">addNotes:</a></li>
							<li><a href="#readnotes">readNotes:</a></li>
							<li><a href="#listnotes">listNotes:</a></li>
							<li><a href="#removenote">removeNote:</a></li>
						</ul>
					</li>
					<li><a href="#programa-principal">Programa principal:</a></li>
					<li><a href="#ejemplos-de-uso">Ejemplos de uso:</a></li>
					<li><a href="#conclusiones">Conclusiones:</a></li>
					<li><a href="#bibliograf%C3%ADa">Bibliografía:</a></li>
				</ul>
				<a href="#introducción" id="introducción" style="color: inherit; text-decoration: none;">
					<h2>Introducción:</h2>
				</a>
				<p>Implemetanción de una aplicación de procesamiento de notas de texto. La misma permite añadir, modificar, eliminar , istar y leer notas de usuarios concretos.
				Las notas se almacenan en ficheros con contenido en formato JSON de la máquina que ejecute dicha aplicación. Solo será posible interactuar con la misma a través de la línea de comandos gracias al uso del módulo <code>yargs</code>.</p>
				<a href="#objetivos" id="objetivos" style="color: inherit; text-decoration: none;">
					<h2>Objetivos:</h2>
				</a>
				<ul>
					<li><p>Utilizar el módulos <code>yargs</code> para la implementación de aplicaciones en línea de comandos</p>
					</li>
					<li><p>Utilizar la API síncrona de <code>Node.js</code> para gestionar el I/O del programa.</p>
						<a href="#clase-notes" id="clase-notes" style="color: inherit; text-decoration: none;">
							<h2>Clase Notes:</h2>
						</a>
						<p>Esta clase será la encargada de gestionar la API sincronca de <code>Node.js</code>. Recalcar el uso del patrón de diseño <code>singleton</code> considerando conveniente que la propia clase gestionará la <code>BBDD</code> de notas en un mismo fichero.</p>
						<pre><code class="language-typescript"><span style="color: #001080">private</span><span style="color: #000000"> </span><span style="color: #001080">static</span><span style="color: #000000"> notes: </span><span style="color: #001080">Notes</span><span style="color: #000000">;</span>

<span style="color: #001080">private</span><span style="color: #000000"> </span><span style="color: #795E26">constructor</span><span style="color: #000000">() {}</span>

<span style="color: #001080">public</span><span style="color: #000000"> </span><span style="color: #001080">static</span><span style="color: #000000"> </span><span style="color: #795E26">getNotes</span><span style="color: #000000">(): </span><span style="color: #001080">Notes</span><span style="color: #000000"> {</span>
<span style="color: #000000">  </span><span style="color: #AF00DB">if</span><span style="color: #000000"> (!</span><span style="color: #001080">fs</span><span style="color: #000000">.</span><span style="color: #795E26">existsSync</span><span style="color: #000000">(</span><span style="color: #A31515">`./notes`</span><span style="color: #000000">)) {</span>
<span style="color: #000000">    </span><span style="color: #001080">fs</span><span style="color: #000000">.</span><span style="color: #795E26">mkdirSync</span><span style="color: #000000">(</span><span style="color: #A31515">`./notes`</span><span style="color: #000000">, {</span><span style="color: #001080">recursive:</span><span style="color: #000000"> </span><span style="color: #0000FF">true</span><span style="color: #000000">});</span>
<span style="color: #000000">  }</span>
<span style="color: #000000">  </span><span style="color: #AF00DB">if</span><span style="color: #000000"> (!</span><span style="color: #001080">Notes</span><span style="color: #000000">.</span><span style="color: #001080">notes</span><span style="color: #000000">) {</span>
<span style="color: #000000">    </span><span style="color: #001080">Notes</span><span style="color: #000000">.</span><span style="color: #001080">notes</span><span style="color: #000000"> = </span><span style="color: #0000FF">new</span><span style="color: #000000"> </span><span style="color: #795E26">Notes</span><span style="color: #000000">();</span>
<span style="color: #000000">  }</span>
<span style="color: #000000">  </span><span style="color: #AF00DB">return</span><span style="color: #000000"> </span><span style="color: #001080">Notes</span><span style="color: #000000">.</span><span style="color: #001080">notes</span><span style="color: #000000">;</span>
<span style="color: #000000">};</span>
</code></pre>
					</li>
				</ul>
				<p><code>fs.existsSync(Path)</code> nos permite verificar si la ruta Path existe ya que existe la posibilidad de tener el directorio donde se guardarán las notas ya generados. De la misma forma, <code>fs.mkdirSync</code> nos permite crear un directorio (Recordemos que todos estos pasos se realizan de manera síncrona).
					La propia clase siempre genera un directorio <code>notes</code> para almacenar las notas.
				Los argumentos utilizados para la correcta ejecución del programa son:</p>
				<ul>
					<li><code>--user=&quot;username&quot;</code>: Nombre del usuario de la nota</li>
					<li><code>--body=&quot;Contenido de la nota&quot;</code>: Contenido de la nota a guardar</li>
					<li><code>--title=&quot;Título de la nota&quot;</code>: Nombre de la nota</li>
					<li><code>--color=&quot;color&quot;</code>: Color de la nota, en este caso los colores disponibles son <code>red</code>, <code>blue</code>, <code>green</code> y <code>yellow</code>. En caso de usar cualquier otro color el programa generará un error de ejecución.</li>
				</ul>
				<p>A continuación los principales métodos de la clase son:</p>
				<a href="#addnotes" id="addnotes" style="color: inherit; text-decoration: none;">
					<h3>addNotes:</h3>
				</a>
				<p>Permite agregar notas utilizando los siguientes argumentos:  </p>
				<p><code>node dist/note-app.js add --user=&quot;Carlos&quot; --title=&quot;Nota uno&quot; --body=&quot;Esta es mi primera nota&quot; --color=&quot;red&quot;</code></p>
				<pre><code class="language-typescript"><span style="color: #795E26">addNotes</span><span style="color: #000000">(</span><span style="color: #001080">username</span><span style="color: #000000"> :</span><span style="color: #001080">string</span><span style="color: #000000">, </span><span style="color: #001080">title</span><span style="color: #000000"> :</span><span style="color: #001080">string</span><span style="color: #000000">, </span><span style="color: #001080">body</span><span style="color: #000000"> :</span><span style="color: #001080">string</span><span style="color: #000000">, </span><span style="color: #001080">color</span><span style="color: #000000"> :</span><span style="color: #001080">string</span><span style="color: #000000">) {</span>
<span style="color: #000000">    </span><span style="color: #0000FF">this</span><span style="color: #000000">.</span><span style="color: #795E26">checkColor</span><span style="color: #000000">(</span><span style="color: #001080">color</span><span style="color: #000000">);</span>
<span style="color: #000000">    </span><span style="color: #008000">// eslint-disable-next-line max-len</span>
<span style="color: #000000">    </span><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">text</span><span style="color: #000000"> = </span><span style="color: #A31515">`{ &quot;title&quot;: &quot;</span><span style="color: #0000FF">${</span><span style="color: #001080">title</span><span style="color: #0000FF">}</span><span style="color: #A31515">&quot;, &quot;body&quot;: &quot;</span><span style="color: #0000FF">${</span><span style="color: #001080">body</span><span style="color: #0000FF">}</span><span style="color: #A31515">&quot; , &quot;color&quot;: &quot;</span><span style="color: #0000FF">${</span><span style="color: #001080">color</span><span style="color: #0000FF">}</span><span style="color: #A31515">&quot; }`</span><span style="color: #000000">;</span>
<span style="color: #000000">    </span><span style="color: #AF00DB">if</span><span style="color: #000000"> (</span><span style="color: #001080">fs</span><span style="color: #000000">.</span><span style="color: #795E26">existsSync</span><span style="color: #000000">(</span><span style="color: #A31515">`./notes/</span><span style="color: #0000FF">${</span><span style="color: #001080">username</span><span style="color: #0000FF">}</span><span style="color: #A31515">`</span><span style="color: #000000">)) {</span>
<span style="color: #000000">      </span><span style="color: #AF00DB">if</span><span style="color: #000000"> (!</span><span style="color: #001080">fs</span><span style="color: #000000">.</span><span style="color: #795E26">existsSync</span><span style="color: #000000">(</span><span style="color: #A31515">`./notes/</span><span style="color: #0000FF">${</span><span style="color: #001080">username</span><span style="color: #0000FF">}</span><span style="color: #A31515">/</span><span style="color: #0000FF">${</span><span style="color: #001080">title</span><span style="color: #0000FF">}</span><span style="color: #A31515">`</span><span style="color: #000000">)) {</span>
<span style="color: #000000">        </span><span style="color: #001080">fs</span><span style="color: #000000">.</span><span style="color: #795E26">writeFileSync</span><span style="color: #000000">(</span><span style="color: #A31515">`./notes/</span><span style="color: #0000FF">${</span><span style="color: #001080">username</span><span style="color: #0000FF">}</span><span style="color: #A31515">/</span><span style="color: #0000FF">${</span><span style="color: #001080">title</span><span style="color: #0000FF">}</span><span style="color: #A31515">`</span><span style="color: #000000">, </span><span style="color: #001080">text</span><span style="color: #000000">);</span>
<span style="color: #000000">        </span><span style="color: #001080">console</span><span style="color: #000000">.</span><span style="color: #795E26">log</span><span style="color: #000000">(</span><span style="color: #A31515">`New note added! (Title </span><span style="color: #0000FF">${</span><span style="color: #001080">title</span><span style="color: #0000FF">}</span><span style="color: #A31515">)`</span><span style="color: #000000">);</span>
<span style="color: #000000">      } </span><span style="color: #AF00DB">else</span><span style="color: #000000"> {</span>
<span style="color: #000000">        </span><span style="color: #001080">console</span><span style="color: #000000">.</span><span style="color: #795E26">log</span><span style="color: #000000">(</span><span style="color: #A31515">&#039;Note title taken!&#039;</span><span style="color: #000000">);</span>
<span style="color: #000000">      };</span>
<span style="color: #000000">    } </span><span style="color: #AF00DB">else</span><span style="color: #000000"> {</span>
<span style="color: #000000">      </span><span style="color: #001080">fs</span><span style="color: #000000">.</span><span style="color: #795E26">mkdirSync</span><span style="color: #000000">(</span><span style="color: #A31515">`./notes/</span><span style="color: #0000FF">${</span><span style="color: #001080">username</span><span style="color: #0000FF">}</span><span style="color: #A31515">`</span><span style="color: #000000">, {</span><span style="color: #001080">recursive:</span><span style="color: #000000"> </span><span style="color: #0000FF">true</span><span style="color: #000000">});</span>
<span style="color: #000000">      </span><span style="color: #001080">fs</span><span style="color: #000000">.</span><span style="color: #795E26">writeFileSync</span><span style="color: #000000">(</span><span style="color: #A31515">`./notes/</span><span style="color: #0000FF">${</span><span style="color: #001080">username</span><span style="color: #0000FF">}</span><span style="color: #A31515">/</span><span style="color: #0000FF">${</span><span style="color: #001080">title</span><span style="color: #0000FF">}</span><span style="color: #A31515">`</span><span style="color: #000000">, </span><span style="color: #001080">text</span><span style="color: #000000">);</span>
<span style="color: #000000">      </span><span style="color: #001080">console</span><span style="color: #000000">.</span><span style="color: #795E26">log</span><span style="color: #000000">(</span><span style="color: #A31515">`New note added! (Title </span><span style="color: #0000FF">${</span><span style="color: #001080">title</span><span style="color: #0000FF">}</span><span style="color: #A31515">)`</span><span style="color: #000000">);</span>
<span style="color: #000000">    }</span>
<span style="color: #000000">  };</span>
</code></pre>
				<p><code>this.checkColor</code> es un método que nos permite primero si el color del argumento es compatible con nuestro programa. Luego ya solo nos queda filtrar el caso en que exista la nota (No podremos agregar una nota con dos títulos iguales), no exista la nota pero tampoco exista el directorio con el nombre de usuario (Por lo tanto es necesario crearla en nuestra <code>BBDD</code> ya que es la primera nota de ese usuario que se introduce) y exista el nombre de usuario pero no la nota (por lo tanto agregamos la nota a ese directorio).
				Cabe destacar que la nota se guarda en formato <code>JSON</code> para una mayor facilidad de gestión a la hora de leer los datos.</p>
				<pre><code class="language-typescript"><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">text</span><span style="color: #000000"> = </span><span style="color: #A31515">`{ &quot;title&quot;: &quot;</span><span style="color: #0000FF">${</span><span style="color: #001080">title</span><span style="color: #0000FF">}</span><span style="color: #A31515">&quot;, &quot;body&quot;: &quot;</span><span style="color: #0000FF">${</span><span style="color: #001080">body</span><span style="color: #0000FF">}</span><span style="color: #A31515">&quot; , &quot;color&quot;: &quot;</span><span style="color: #0000FF">${</span><span style="color: #001080">color</span><span style="color: #0000FF">}</span><span style="color: #A31515">&quot; }`</span><span style="color: #000000">;</span>
</code></pre>
				<p>Para escribir utilizamos la función <code> fs.writeFileSync(path, text</code> y para la creación de directorios <code>fs.mkdirSync(Path, {recursive: true})</code>  </p>
				<a href="#readnotes" id="readnotes" style="color: inherit; text-decoration: none;">
					<h3>readNotes:</h3>
				</a>
				<p>Permite leer las notas de un determinado usuario, los argumentos a introducir serían los siguientes:</p>
				<pre><code class="language-typescript"><span style="color: #001080">node</span><span style="color: #000000"> </span><span style="color: #001080">dist</span><span style="color: #000000">/</span><span style="color: #001080">note</span><span style="color: #000000">-</span><span style="color: #001080">app</span><span style="color: #000000">.</span><span style="color: #001080">js</span><span style="color: #000000"> </span><span style="color: #001080">read</span><span style="color: #000000"> --</span><span style="color: #001080">user</span><span style="color: #000000">=</span><span style="color: #A31515">&quot;Carlos&quot;</span><span style="color: #000000"> --</span><span style="color: #001080">title</span><span style="color: #000000">=</span><span style="color: #A31515">&quot;Nota uno&quot;</span>
<span style="color: #001080">Nota</span><span style="color: #000000"> </span><span style="color: #001080">uno</span>
<span style="color: #001080">Esta</span><span style="color: #000000"> </span><span style="color: #001080">es</span><span style="color: #000000"> </span><span style="color: #001080">mi</span><span style="color: #000000"> </span><span style="color: #001080">primera</span><span style="color: #000000"> </span><span style="color: #001080">nota</span>
</code></pre>
				<pre><code class="language-typescript"><span style="color: #795E26">readNotes</span><span style="color: #000000">(</span><span style="color: #001080">username</span><span style="color: #000000"> :</span><span style="color: #001080">string</span><span style="color: #000000">, </span><span style="color: #001080">title</span><span style="color: #000000"> :</span><span style="color: #001080">string</span><span style="color: #000000">) {</span>
<span style="color: #000000">    </span><span style="color: #AF00DB">if</span><span style="color: #000000"> (</span><span style="color: #001080">fs</span><span style="color: #000000">.</span><span style="color: #795E26">existsSync</span><span style="color: #000000">(</span><span style="color: #A31515">`./notes/</span><span style="color: #0000FF">${</span><span style="color: #001080">username</span><span style="color: #0000FF">}</span><span style="color: #A31515">/</span><span style="color: #0000FF">${</span><span style="color: #001080">title</span><span style="color: #0000FF">}</span><span style="color: #A31515">`</span><span style="color: #000000">)) {</span>
<span style="color: #000000">      </span><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">data</span><span style="color: #000000"> = </span><span style="color: #001080">fs</span><span style="color: #000000">.</span><span style="color: #795E26">readFileSync</span><span style="color: #000000">(</span><span style="color: #A31515">`./notes/</span><span style="color: #0000FF">${</span><span style="color: #001080">username</span><span style="color: #0000FF">}</span><span style="color: #A31515">/</span><span style="color: #0000FF">${</span><span style="color: #001080">title</span><span style="color: #0000FF">}</span><span style="color: #A31515">`</span><span style="color: #000000">);</span>
<span style="color: #000000">      </span><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">JsonNote</span><span style="color: #000000"> = </span><span style="color: #267F99">JSON</span><span style="color: #000000">.</span><span style="color: #795E26">parse</span><span style="color: #000000">(</span><span style="color: #001080">data</span><span style="color: #000000">.</span><span style="color: #795E26">toString</span><span style="color: #000000">());</span>
<span style="color: #000000">      </span><span style="color: #0000FF">this</span><span style="color: #000000">.</span><span style="color: #795E26">consolelogColor</span><span style="color: #000000">(</span><span style="color: #A31515">`</span><span style="color: #0000FF">${</span><span style="color: #001080">JsonNote</span><span style="color: #000000FF">.</span><span style="color: #001080">title</span><span style="color: #0000FF">}</span><span style="color: #A31515">`</span><span style="color: #000000">, </span><span style="color: #001080">JsonNote</span><span style="color: #000000">.</span><span style="color: #001080">color</span><span style="color: #000000">, </span><span style="color: #0000FF">true</span><span style="color: #000000">);</span>
<span style="color: #000000">      </span><span style="color: #0000FF">this</span><span style="color: #000000">.</span><span style="color: #795E26">consolelogColor</span><span style="color: #000000">(</span><span style="color: #A31515">`</span><span style="color: #0000FF">${</span><span style="color: #001080">JsonNote</span><span style="color: #000000FF">.</span><span style="color: #001080">body</span><span style="color: #0000FF">}</span><span style="color: #A31515">`</span><span style="color: #000000">, </span><span style="color: #001080">JsonNote</span><span style="color: #000000">.</span><span style="color: #001080">color</span><span style="color: #000000">);</span>
<span style="color: #000000">      </span><span style="color: #AF00DB">return</span><span style="color: #000000"> </span><span style="color: #001080">JsonNote</span><span style="color: #000000">;</span>
<span style="color: #000000">    } </span><span style="color: #AF00DB">else</span><span style="color: #000000"> {</span>
<span style="color: #000000">      </span><span style="color: #001080">console</span><span style="color: #000000">.</span><span style="color: #795E26">log</span><span style="color: #000000">(</span><span style="color: #A31515">&#039;Note not found&#039;</span><span style="color: #000000">);</span>
<span style="color: #000000">      </span><span style="color: #AF00DB">return</span><span style="color: #000000"> </span><span style="color: #A31515">&#039;Note not found&#039;</span><span style="color: #000000">;</span>
<span style="color: #000000">    }</span>
<span style="color: #000000">  }</span>
</code></pre>
				<p>El programa verifica si dicha nota existe para leerla y extraer su <code>JSON</code> que con <code>JSON.parse()</code> convertiremos los datos en un objeto clave-valor para poder mostrar con facilidad los datos pertinentes. <code>consolelogColor(text, color)</code> imprime por pantalla el valor introducido por argumento y el color con el que se quiere imprimir.<br>El otro caso consiste en no encontrar el directorio ni la nota mostrando un mensaje en pantalla de información.</p>
				<a href="#listnotes" id="listnotes" style="color: inherit; text-decoration: none;">
					<h3>listNotes:</h3>
				</a>
				<p>Lista las notas de un usuario:</p>
				<pre><code class="language-typescript"><span style="color: #001080">node</span><span style="color: #000000"> </span><span style="color: #001080">dist</span><span style="color: #000000">/</span><span style="color: #001080">note</span><span style="color: #000000">-</span><span style="color: #001080">app</span><span style="color: #000000">.</span><span style="color: #001080">js</span><span style="color: #000000"> </span><span style="color: #001080">list</span><span style="color: #000000"> --</span><span style="color: #001080">user</span><span style="color: #000000">=</span><span style="color: #A31515">&quot;Carlos&quot;</span>
<span style="color: #001080">Your</span><span style="color: #000000"> notes:</span>
<span style="color: #000000">- </span><span style="color: #001080">Nota</span><span style="color: #000000"> </span><span style="color: #001080">uno</span>
</code></pre>
				<pre><code class="language-typescript"><span style="color: #000000">  </span><span style="color: #795E26">listNotes</span><span style="color: #000000">(</span><span style="color: #001080">username</span><span style="color: #000000"> :</span><span style="color: #001080">string</span><span style="color: #000000">) {</span>
<span style="color: #000000">    </span><span style="color: #AF00DB">if</span><span style="color: #000000"> (</span><span style="color: #001080">fs</span><span style="color: #000000">.</span><span style="color: #795E26">existsSync</span><span style="color: #000000">(</span><span style="color: #A31515">`./notes/</span><span style="color: #0000FF">${</span><span style="color: #001080">username</span><span style="color: #0000FF">}</span><span style="color: #A31515">`</span><span style="color: #000000">)) {</span>
<span style="color: #000000">      </span><span style="color: #001080">console</span><span style="color: #000000">.</span><span style="color: #795E26">log</span><span style="color: #000000">(</span><span style="color: #001080">chalk</span><span style="color: #000000">.</span><span style="color: #001080">white</span><span style="color: #000000">.</span><span style="color: #795E26">inverse</span><span style="color: #000000">(</span><span style="color: #A31515">&#039;Your notes:&#039;</span><span style="color: #000000">));</span>
<span style="color: #000000">      </span><span style="color: #0000FF">let</span><span style="color: #000000"> </span><span style="color: #001080">list</span><span style="color: #000000"> = </span><span style="color: #A31515">&#039;&#039;</span><span style="color: #000000">;</span>
<span style="color: #000000">      </span><span style="color: #001080">fs</span><span style="color: #000000">.</span><span style="color: #795E26">readdirSync</span><span style="color: #000000">(</span><span style="color: #A31515">`./notes/</span><span style="color: #0000FF">${</span><span style="color: #001080">username</span><span style="color: #0000FF">}</span><span style="color: #A31515">/`</span><span style="color: #000000">).</span><span style="color: #795E26">forEach</span><span style="color: #000000">((</span><span style="color: #001080">note</span><span style="color: #000000">) </span><span style="color: #0000FF">=&gt;</span><span style="color: #000000"> {</span>
<span style="color: #000000">        </span><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">data</span><span style="color: #000000"> = </span><span style="color: #001080">fs</span><span style="color: #000000">.</span><span style="color: #795E26">readFileSync</span><span style="color: #000000">(</span><span style="color: #A31515">`./notes/</span><span style="color: #0000FF">${</span><span style="color: #001080">username</span><span style="color: #0000FF">}</span><span style="color: #A31515">/</span><span style="color: #0000FF">${</span><span style="color: #001080">note</span><span style="color: #0000FF">}</span><span style="color: #A31515">`</span><span style="color: #000000">);</span>
<span style="color: #000000">        </span><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">JsonNote</span><span style="color: #000000"> = </span><span style="color: #267F99">JSON</span><span style="color: #000000">.</span><span style="color: #795E26">parse</span><span style="color: #000000">(</span><span style="color: #001080">data</span><span style="color: #000000">.</span><span style="color: #795E26">toString</span><span style="color: #000000">());</span>
<span style="color: #000000">        </span><span style="color: #001080">list</span><span style="color: #000000"> = </span><span style="color: #001080">list</span><span style="color: #000000"> + </span><span style="color: #001080">JsonNote</span><span style="color: #000000">.</span><span style="color: #001080">title</span><span style="color: #000000"> + </span><span style="color: #A31515">&#039;</span><span style="color: #EE0000">\n</span><span style="color: #A31515">&#039;</span><span style="color: #000000">;</span>
<span style="color: #000000">        </span><span style="color: #0000FF">this</span><span style="color: #000000">.</span><span style="color: #795E26">consolelogColor</span><span style="color: #000000">(</span><span style="color: #A31515">`- </span><span style="color: #0000FF">${</span><span style="color: #001080">JsonNote</span><span style="color: #000000FF">.</span><span style="color: #001080">title</span><span style="color: #0000FF">}</span><span style="color: #A31515">`</span><span style="color: #000000">, </span><span style="color: #001080">JsonNote</span><span style="color: #000000">.</span><span style="color: #001080">color</span><span style="color: #000000">);</span>
<span style="color: #000000">      });</span>
<span style="color: #000000">      </span><span style="color: #AF00DB">return</span><span style="color: #000000"> </span><span style="color: #001080">list</span><span style="color: #000000">;</span>
<span style="color: #000000">    } </span><span style="color: #AF00DB">else</span><span style="color: #000000"> {</span>
<span style="color: #000000">      </span><span style="color: #001080">console</span><span style="color: #000000">.</span><span style="color: #795E26">log</span><span style="color: #000000">(</span><span style="color: #A31515">`That user doesn´t exist`</span><span style="color: #000000">);</span>
<span style="color: #000000">      </span><span style="color: #AF00DB">return</span><span style="color: #000000"> </span><span style="color: #A31515">&#039;User doesnt exist&#039;</span><span style="color: #000000">;</span>
<span style="color: #000000">    }</span>
<span style="color: #000000">  }</span>
</code></pre>
				<p>El programa verifica si el directorio correspondiente del usuario existe ya que si no existe quiere decir que ese usuaio no tiene notas asociadas. En caso de que exista simplemente tenemos que leer cada fichero y extraer su <code>title</code> y su <code>color</code> gracias al formato <code>JSON</code> de los datos y utilizar el <code>consolelogColor()</code> para imprimir el <code>title</code> con el color correspondiente.  </p>
				<a href="#removenote" id="removenote" style="color: inherit; text-decoration: none;">
					<h3>removeNote:</h3>
				</a>
				<p>Elimina una nota del usuario:</p>
				<pre><code class="language-typescript"><span style="color: #001080">node</span><span style="color: #000000"> </span><span style="color: #001080">dist</span><span style="color: #000000">/</span><span style="color: #001080">note</span><span style="color: #000000">-</span><span style="color: #001080">app</span><span style="color: #000000">.</span><span style="color: #001080">js</span><span style="color: #000000"> </span><span style="color: #001080">remove</span><span style="color: #000000"> --</span><span style="color: #001080">user</span><span style="color: #000000">=</span><span style="color: #A31515">&quot;Carlos&quot;</span><span style="color: #000000"> --</span><span style="color: #001080">title</span><span style="color: #000000">=</span><span style="color: #A31515">&quot;Nota uno&quot;</span>
<span style="color: #001080">Note</span><span style="color: #000000"> </span><span style="color: #001080">removed</span><span style="color: #000000">!</span>
</code></pre>
				<pre><code class="language-typescript"><span style="color: #000000">  </span><span style="color: #795E26">removeNote</span><span style="color: #000000">(</span><span style="color: #001080">username</span><span style="color: #000000"> :</span><span style="color: #001080">string</span><span style="color: #000000">, </span><span style="color: #001080">title</span><span style="color: #000000"> :</span><span style="color: #001080">string</span><span style="color: #000000">) {</span>
<span style="color: #000000">    </span><span style="color: #AF00DB">if</span><span style="color: #000000"> (</span><span style="color: #001080">fs</span><span style="color: #000000">.</span><span style="color: #795E26">existsSync</span><span style="color: #000000">(</span><span style="color: #A31515">`./notes/</span><span style="color: #0000FF">${</span><span style="color: #001080">username</span><span style="color: #0000FF">}</span><span style="color: #A31515">/</span><span style="color: #0000FF">${</span><span style="color: #001080">title</span><span style="color: #0000FF">}</span><span style="color: #A31515">`</span><span style="color: #000000">)) {</span>
<span style="color: #000000">      </span><span style="color: #001080">console</span><span style="color: #000000">.</span><span style="color: #795E26">log</span><span style="color: #000000">(</span><span style="color: #A31515">&#039;Note removed!&#039;</span><span style="color: #000000">);</span>
<span style="color: #000000">      </span><span style="color: #001080">fs</span><span style="color: #000000">.</span><span style="color: #795E26">rmSync</span><span style="color: #000000">(</span><span style="color: #A31515">`./notes/</span><span style="color: #0000FF">${</span><span style="color: #001080">username</span><span style="color: #0000FF">}</span><span style="color: #A31515">/</span><span style="color: #0000FF">${</span><span style="color: #001080">title</span><span style="color: #0000FF">}</span><span style="color: #A31515">`</span><span style="color: #000000">);</span>
<span style="color: #000000">      </span><span style="color: #AF00DB">return</span><span style="color: #000000"> </span><span style="color: #A31515">`Note removed!`</span><span style="color: #000000">;</span>
<span style="color: #000000">    } </span><span style="color: #AF00DB">else</span><span style="color: #000000"> {</span>
<span style="color: #000000">      </span><span style="color: #001080">console</span><span style="color: #000000">.</span><span style="color: #795E26">log</span><span style="color: #000000">(</span><span style="color: #A31515">`No note found`</span><span style="color: #000000">);</span>
<span style="color: #000000">      </span><span style="color: #AF00DB">return</span><span style="color: #000000"> </span><span style="color: #A31515">`No note found`</span><span style="color: #000000">;</span>
<span style="color: #000000">    }</span>
<span style="color: #000000">  }</span>
</code></pre>
				<p>Funcionamiento bastante simple, si existe el directorio lo eliminamos con <code>fs.rmSync()</code> y en caso contrario mostrar información en pantalla que dicha nota no existe.</p>
				<a href="#programa-principal" id="programa-principal" style="color: inherit; text-decoration: none;">
					<h2>Programa principal:</h2>
				</a>
				<p>El programa principal se encuentra en <code>note-app.ts</code> y es donde se utiliza el módulo de <code>yargs</code> para invocar a las diferentes funciones de la clase <code>Notes</code>.  </p>
				<pre><code class="language-typescript"><span style="color: #001080">yargs</span><span style="color: #000000">.</span><span style="color: #795E26">command</span><span style="color: #000000">({</span>
<span style="color: #000000">  </span><span style="color: #001080">command:</span><span style="color: #000000"> </span><span style="color: #A31515">&#039;add&#039;</span><span style="color: #000000">,</span>
<span style="color: #000000">  </span><span style="color: #001080">describe:</span><span style="color: #000000"> </span><span style="color: #A31515">&#039;Add a new note&#039;</span><span style="color: #000000">,</span>
<span style="color: #000000">  </span><span style="color: #001080">builder:</span><span style="color: #000000"> {</span>
<span style="color: #000000">    </span><span style="color: #001080">user:</span><span style="color: #000000"> {</span>
<span style="color: #000000">      </span><span style="color: #001080">describe:</span><span style="color: #000000"> </span><span style="color: #A31515">&#039;Username&#039;</span><span style="color: #000000">,</span>
<span style="color: #000000">      </span><span style="color: #001080">demandOption:</span><span style="color: #000000"> </span><span style="color: #0000FF">true</span><span style="color: #000000">,</span>
<span style="color: #000000">      </span><span style="color: #001080">type:</span><span style="color: #000000"> </span><span style="color: #A31515">&#039;string&#039;</span><span style="color: #000000">,</span>
<span style="color: #000000">    },</span>
<span style="color: #000000">    </span><span style="color: #001080">title:</span><span style="color: #000000"> {</span>
<span style="color: #000000">      </span><span style="color: #001080">describe:</span><span style="color: #000000"> </span><span style="color: #A31515">&#039;Note title&#039;</span><span style="color: #000000">,</span>
<span style="color: #000000">      </span><span style="color: #001080">demandOption:</span><span style="color: #000000"> </span><span style="color: #0000FF">true</span><span style="color: #000000">,</span>
<span style="color: #000000">      </span><span style="color: #001080">type:</span><span style="color: #000000"> </span><span style="color: #A31515">&#039;string&#039;</span><span style="color: #000000">,</span>
<span style="color: #000000">    },</span>
<span style="color: #000000">    </span><span style="color: #001080">body:</span><span style="color: #000000"> {</span>
<span style="color: #000000">      </span><span style="color: #001080">describe:</span><span style="color: #000000"> </span><span style="color: #A31515">&#039;Body title&#039;</span><span style="color: #000000">,</span>
<span style="color: #000000">      </span><span style="color: #001080">demandOption:</span><span style="color: #000000"> </span><span style="color: #0000FF">true</span><span style="color: #000000">,</span>
<span style="color: #000000">      </span><span style="color: #001080">type:</span><span style="color: #000000"> </span><span style="color: #A31515">&#039;string&#039;</span><span style="color: #000000">,</span>
<span style="color: #000000">    },</span>
<span style="color: #000000">    </span><span style="color: #001080">color:</span><span style="color: #000000"> {</span>
<span style="color: #000000">      </span><span style="color: #001080">describe:</span><span style="color: #000000"> </span><span style="color: #A31515">&#039;Color´s note&#039;</span><span style="color: #000000">,</span>
<span style="color: #000000">      </span><span style="color: #001080">demandOption:</span><span style="color: #000000"> </span><span style="color: #0000FF">true</span><span style="color: #000000">,</span>
<span style="color: #000000">      </span><span style="color: #001080">type:</span><span style="color: #000000"> </span><span style="color: #A31515">&#039;string&#039;</span><span style="color: #000000">,</span>
<span style="color: #000000">    },</span>
<span style="color: #000000">  },</span>
<span style="color: #000000">  </span><span style="color: #795E26">handler</span><span style="color: #000000">(</span><span style="color: #001080">argv</span><span style="color: #000000">) {</span>
<span style="color: #000000">    </span><span style="color: #AF00DB">if</span><span style="color: #000000"> (</span><span style="color: #0000FF">typeof</span><span style="color: #000000"> </span><span style="color: #001080">argv</span><span style="color: #000000">.</span><span style="color: #001080">user</span><span style="color: #000000"> === </span><span style="color: #A31515">&#039;string&#039;</span><span style="color: #000000"> &amp;&amp;</span>
<span style="color: #000000">    </span><span style="color: #0000FF">typeof</span><span style="color: #000000"> </span><span style="color: #001080">argv</span><span style="color: #000000">.</span><span style="color: #001080">title</span><span style="color: #000000"> === </span><span style="color: #A31515">&#039;string&#039;</span><span style="color: #000000"> &amp;&amp;</span>
<span style="color: #000000">    </span><span style="color: #0000FF">typeof</span><span style="color: #000000"> </span><span style="color: #001080">argv</span><span style="color: #000000">.</span><span style="color: #001080">color</span><span style="color: #000000"> === </span><span style="color: #A31515">&#039;string&#039;</span><span style="color: #000000"> &amp;&amp;</span>
<span style="color: #000000">    </span><span style="color: #0000FF">typeof</span><span style="color: #000000"> </span><span style="color: #001080">argv</span><span style="color: #000000">.</span><span style="color: #001080">body</span><span style="color: #000000"> === </span><span style="color: #A31515">&#039;string&#039;</span><span style="color: #000000">) {</span>
<span style="color: #000000">      </span><span style="color: #001080">notas</span><span style="color: #000000">.</span><span style="color: #795E26">addNotes</span><span style="color: #000000">(</span>
<span style="color: #000000">          </span><span style="color: #001080">argv</span><span style="color: #000000">.</span><span style="color: #001080">user</span><span style="color: #000000">,</span>
<span style="color: #000000">          </span><span style="color: #001080">argv</span><span style="color: #000000">.</span><span style="color: #001080">title</span><span style="color: #000000">,</span>
<span style="color: #000000">          </span><span style="color: #001080">argv</span><span style="color: #000000">.</span><span style="color: #001080">body</span><span style="color: #000000">,</span>
<span style="color: #000000">          </span><span style="color: #001080">argv</span><span style="color: #000000">.</span><span style="color: #001080">color</span><span style="color: #000000">,</span>
<span style="color: #000000">      );</span>
<span style="color: #000000">    }</span>
<span style="color: #000000">  },</span>
<span style="color: #000000">});</span>
</code></pre>
				<p>Observamos como para crear un nuevo comando utilizamos el método <code>command</code> incluido en la librería de <code>yargs</code> donde basicamente especificamos:</p>
				<ul>
					<li><strong>command</strong>: Introduce el argumento necesario para invocar dicho comando</li>
					<li><strong>describe</strong>: Una breve descripción del uso del comando</li>
					<li><strong>builder</strong>: Especifica los argumentos del comando por ejemplo <code>--user=&quot;username&quot;</code>:<pre><code class="language-typescript"><span style="color: #000000">  user: {</span>
<span style="color: #000000">    describe: </span><span style="color: #A31515">&#039;Username&#039;</span><span style="color: #000000">,</span>
<span style="color: #000000">    demandOption: </span><span style="color: #0000FF">true</span><span style="color: #000000">,</span>
<span style="color: #000000">    type: </span><span style="color: #A31515">&#039;string&#039;</span><span style="color: #000000">,</span>
<span style="color: #000000">  },</span>
</code></pre>
						<ul>
							<li><strong>describe</strong>: Nombre del argumento</li>
							<li><strong>demandOption</strong>: Argumento obligatorio</li>
							<li><strong>type</strong>: tipo del argumento</li>
						</ul>
					</li>
					<li><strong>handler(argv)</strong>: Función que recibe como parametro los argumentos que contienen cada uno en formato <code>JSON</code>. En este caso se filtra el tipo de dato introducido y posteriormente invoca a la función correspondiente según el comando (En el ejemplo utilizamos <code>add</code> por tanto agregamos una nota: <pre><code class="language-typescript"><span style="color: #000000">     </span><span style="color: #001080">notas</span><span style="color: #000000">.</span><span style="color: #795E26">addNotes</span><span style="color: #000000">(</span>
<span style="color: #000000">        </span><span style="color: #001080">argv</span><span style="color: #000000">.</span><span style="color: #001080">user</span><span style="color: #000000">,</span>
<span style="color: #000000">        </span><span style="color: #001080">argv</span><span style="color: #000000">.</span><span style="color: #001080">title</span><span style="color: #000000">,</span>
<span style="color: #000000">        </span><span style="color: #001080">argv</span><span style="color: #000000">.</span><span style="color: #001080">body</span><span style="color: #000000">,</span>
<span style="color: #000000">        </span><span style="color: #001080">argv</span><span style="color: #000000">.</span><span style="color: #001080">color</span><span style="color: #000000">,</span>
<span style="color: #000000">    );</span>
</code></pre>
					Este patrón se repetirá para cada uno de los comandos (que corresponden con cada uno de los métodos de la clase <code>Notes</code>).  </li>
				</ul>
				<a href="#ejemplos-de-uso" id="ejemplos-de-uso" style="color: inherit; text-decoration: none;">
					<h2>Ejemplos de uso:</h2>
				</a>
				<p><img src="media/P8.gif" alt="examples"></p>
				<a href="#conclusiones" id="conclusiones" style="color: inherit; text-decoration: none;">
					<h2>Conclusiones:</h2>
				</a>
				<p>La práctica se ha desarrollado sin dificultades y me ha permitido tener un primer contacto con <code>Node</code> y su potencia para interactuar con la máquina utilizando <code>Typescript</code>.</p>
				<a href="#bibliografía" id="bibliografía" style="color: inherit; text-decoration: none;">
					<h2>Bibliografía:</h2>
				</a>
				<p><a href="https://nodejs.org/dist/latest-v14.x/docs/api/fs.html">https://nodejs.org/dist/latest-v14.x/docs/api/fs.html</a><br><a href="https://www.npmjs.com/package/yargs">https://www.npmjs.com/package/yargs</a>  </p>
			</div>
		</div>
		<div class="col-4 col-menu menu-sticky-wrap menu-highlight">
			<nav class="tsd-navigation primary">
				<ul>
					<li class=" ">
						<a href="modules.html">Exports</a>
					</li>
					<li class=" tsd-kind-module">
						<a href="modules/note_app.html">note-<wbr>app</a>
					</li>
					<li class=" tsd-kind-module">
						<a href="modules/notes.html">notes</a>
					</li>
				</ul>
			</nav>
			<nav class="tsd-navigation secondary menu-sticky">
				<ul class="before-current">
				</ul>
			</nav>
		</div>
	</div>
</div>
<footer class="with-border-bottom">
	<div class="container">
		<h2>Legend</h2>
		<div class="tsd-legend-group">
			<ul class="tsd-legend">
				<li class="tsd-kind-class"><span class="tsd-kind-icon">Class</span></li>
			</ul>
		</div>
	</div>
</footer>
<div class="container tsd-generator">
	<p>Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p>
</div>
<div class="overlay"></div>
<script src="assets/js/main.js"></script>
</body>
</html>